import random
from fractions import gcd

def brent(N):
        if N%2==0:
                return 2
        y,c,m = random.randint(1, N-1),random.randint(1, N-1),random.randint(1, N-1)
        g,r,q = 1,1,1
        while g==1:             
                x = y
                for i in range(r):
                        y = ((y*y)%N+c)%N
                k = 0
                while (k<r and g==1):
                        ys = y
                        for i in range(min(m,r-k)):
                                y = ((y*y)%N+c)%N
                                q = q*(abs(x-y))%N
                        g = gcd(q,N)
                        k = k + m
                r = r*2
        if g==N:
                while True:
                        ys = ((ys*ys)%N+c)%N
                        g = gcd(abs(x-ys),N)
                        if g>1:
                                break
         
        return g 


m = brent(315)
print(m)

#n = 315
#primefactor(n)

    #n = (6314466083072888893799357126131292332363298818330841375588990772701957128924885547308446055753206513618346628 +
    #     8489480886635003684803965881713619876605218972678101622805574753938383082617597132189266686117769545263915701 +
    #     2069093997368008972127446466642331918780683055206795125307008202024124623398241073775370512734449416950118097 +
    #     5241890667963858754856319805507273709904397119733614666701543905360152543373982524579313575317653646331989064 +
    #     6514021339852658003419919039821928447102124648874593888535820703180842890232097109070323969349199627789953233 +
    #     20184064522476463966355937367009369212758092086293198727008292431243681)

